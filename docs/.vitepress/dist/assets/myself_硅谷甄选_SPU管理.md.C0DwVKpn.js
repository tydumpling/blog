import{_ as i,c as a,a2 as n,o as h}from"./chunks/framework.DN5Ma_nw.js";const g=JSON.parse('{"title":"SPUç®¡ç†","description":"","frontmatter":{"0":"t","1":"i","2":"t","3":"l","4":"e","5":" ","6":"ç”„","7":"é€‰","8":"S","9":"P","10":"U","11":"ç®¡","12":"ç†"},"headers":[],"relativePath":"myself/ç¡…è°·ç”„é€‰/SPUç®¡ç†.md","filePath":"project/myself/ç¡…è°·ç”„é€‰/SPUç®¡ç†.md","lastUpdated":1733132188000}'),l={name:"myself/ç¡…è°·ç”„é€‰/SPUç®¡ç†.md"};function k(p,s,t,e,E,r){return h(),a("div",null,s[0]||(s[0]=[n(`<h1 id="spuç®¡ç†" tabindex="-1">SPUç®¡ç† <a class="header-anchor" href="#spuç®¡ç†" aria-label="Permalink to &quot;SPUç®¡ç†&quot;">â€‹</a></h1><p>SPU ç®¡ç†æ¨¡å—é¡µé¢æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://i.imgloc.com/2023/07/02/VRNnuC.png" alt="VRNnuC.png" loading="lazy"></p><p>ä¸»è¦éœ€è¦æ³¨æ„çš„æ˜¯ SPU å±æ€§çš„æ·»åŠ ã€‚å±æ€§å€¼é€šè¿‡æ¥å£è°ƒç”¨è·å–ï¼Œä¸‹æ‹‰æ¡†é€‰æ‹©å®Œå±æ€§åç‚¹å‡»æŒ‰é’®å¯ä»¥æ·»åŠ åˆ°è¡¨æ ¼å†…ã€‚ä¸‹ä¸€æ¬¡é€‰æ‹©çš„æ—¶å€™å°±æ— æ³•å†é€‰æ‹©è¯¥å±æ€§ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><a href="https://imgse.com/i/pCrzUOI" target="_blank" rel="noreferrer"><img src="https://s1.ax1x.com/2023/07/03/pCrzUOI.png" alt="pCrzUOI.png" loading="lazy"></a></p><h2 id="å±æ€§æ·»åŠ " tabindex="-1">å±æ€§æ·»åŠ  <a class="header-anchor" href="#å±æ€§æ·»åŠ " aria-label="Permalink to &quot;å±æ€§æ·»åŠ &quot;">â€‹</a></h2><p>ç‚¹å‡»æŒ‰é’®æŠŠç”¨æˆ·é€‰æ‹©çš„å±æ€§æ·»åŠ åˆ°è¡¨æ ¼ä¸­ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>è°ƒç”¨æ¥å£è·å–æ•°æ®ï¼Œå¾ªç¯éå†æ¸²æŸ“åˆ°é€‰æ‹©å™¨ä¸­</li><li>ç‚¹å‡»æ·»åŠ æŒ‰é’®åæŠŠæ•°æ®æ·»åŠ åˆ°è¡¨æ ¼æ•°æ®ç»‘å®šçš„æ•°ç»„ä¸­</li></ol><p>é¦–å…ˆéœ€è¦è·å–æ•°æ®å¹¶ä¿å­˜åˆ°ä¸€ä¸ªæ•°ç»„å†…ï¼Œé€šè¿‡ <code>v-for</code> å¾ªç¯éå†æ•°æ®æ¸²æŸ“ç»™ <code>el-option</code> ç»„ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¡ç®—å‡ºå½“å‰è¿˜æœªæ‹¥æœ‰çš„é”€å”®å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> unSelectAttrList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> unSelectArr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spuAttrList.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spuHasAttrList.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">every</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å½“è¯¥itemé¡¹éƒ½ä¸åŒ¹é…ï¼Œè¿”å›trueï¼Œè¢«filterè¿‡æ»¤é™¤å»</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item1.saleAttrName</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> unSelectArr</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-select</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  v-model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">saleChoseAttrVal</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">placeholder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\`è¿˜æœ‰\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">unSelectAttrList</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}ä¸ªæœªé€‰æ‹©\`&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">typeIsInfo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;el-option</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    v-for=&quot;item in unSelectAttrList&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    :key=&quot;item.id&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    :value=&quot;\`\${item.id}:\${item.name}\`&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    :label=&quot;item.name&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {{ item.name }}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/el-option&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-button</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">saleChoseAttrVal </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> typeIsInfo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;primary&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  icon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Plus&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  style</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">margin-left</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">px</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">click</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">addAttrFn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  æ·»åŠ é”€å”®å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">el-button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>ä¸Šæ–¹ä»£ç ä¸­ï¼Œéœ€è¦æ³¨æ„ä¸¤ä¸ªåœ°æ–¹ï¼š</p><ol><li><p>é€šè¿‡è®¡ç®—å±æ€§æŠŠç”¨æˆ·æœªé€‰æ‹©çš„æ•°æ®è¿‡æ»¤å¤„ç†ï¼Œé€šè¿‡ <code>every()</code> æ–¹æ³•åˆ¤æ–­å½“å‰é¡¹æ˜¯å¦ä¸å·²é€‰æ‹©å±æ€§æ•°ç»„å†…æ‰€æœ‰é¡¹ç›¸ç­‰ï¼Œå¦‚æœä¸ºçœŸï¼Œåˆ™è¯´æ˜æ•°ç»„å†…å·²ç»æœ‰è¯¥æ•°æ®ï¼Œå·²ç»è¢«é€‰æ‹©è¿‡ï¼Œæ­¤æ—¶åº”è¯¥è¢« <code>filter</code> è¿‡æ»¤å‡ºå»ã€‚</p><p>ä»£ç å¯ä»¥æ‹†åˆ†ä¸ºä¸¤æ­¥ï¼š</p><ul><li><p>åˆ¤æ–­å½“å‰é¡¹æ˜¯å¦å·²è¢«é€‰æ‹©</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">spuAttrList.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> flag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spuHasAttrList.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">every</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item1.saleAttrName)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><code>flag</code> ä¸º <code>true</code> æ—¶è¡¨ç¤ºå½“å‰é¡¹å¹¶ä¸å­˜åœ¨äºå·²é€‰æ‹©çš„æ•°ç»„å†…ï¼Œ<code>false</code> åä¹‹</p></li><li><p>è¿‡æ»¤é­æ‘åœ¨çš„æ•°æ®ä¸ºæ–°çš„æ•°ç»„</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spuAttrList.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> flag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spuHasAttrList.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">every</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item1.saleAttrName)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> flag</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li></ul></li><li><p>æ¥å£éœ€è¦ä¼ é€’ <code>id</code> ï¼Œè€Œè¡¨æ ¼éœ€è¦å…¶ <code>name</code> å±æ€§æ¸²æŸ“ï¼Œä»¥å¾€åœ¨å¤„ç† <code>:value</code> æ—¶æˆ‘ä»¬éƒ½æ˜¯ä¸ºå…¶è®¾ç½® <code>id</code> ï¼Œæ­¤å¤„å¯ä»¥é€šè¿‡æ¨¡æ¿å­—ç¬¦ä¸²æ‹¼æ¥ <code>id</code> å’Œ <code>name</code> çš„æ–¹å¼ï¼Œè·å–ä¸¤ä¸ªéœ€è¦å±æ€§</p></li></ol><h2 id="æ·»åŠ æ•°æ®" tabindex="-1">æ·»åŠ æ•°æ® <a class="header-anchor" href="#æ·»åŠ æ•°æ®" aria-label="Permalink to &quot;æ·»åŠ æ•°æ®&quot;">â€‹</a></h2><p>ç‚¹å‡»æ·»åŠ æŒ‰é’®åè§£æå‡º <code>id</code> å’Œ <code>name</code> ï¼ŒåŠ ä¸Šå±æ€§å€¼æ•°ç»„ç»„æˆæ–°çš„å¯¹è±¡ï¼Œæ·»åŠ åœ¨è¡¨æ ¼åˆ—è¡¨æ•°ç»„ä¸­ï¼Œå†æŠŠé€‰æ‹©æ¡†å†…çš„å†…å®¹æ¸…ç©ºï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é”€å”®å±æ€§é€‰æ‹©</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> saleChoseAttrVal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addAttrFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(saleChoseAttrVal.value)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å‡†å¤‡åˆå§‹åŒ–æ–°çš„å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">baseSaleAttrId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">saleAttrName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> saleChoseAttrVal.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newSaleAttr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> spuSaleItemType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    baseSaleAttrId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    saleAttrName,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    spuSaleAttrValueList: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newSaleAttr)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è¿½åŠ åˆ°å±æ€§è¡¨æ ¼ä¸­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  spuHasAttrList.value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newSaleAttr)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  saleChoseAttrVal.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>é€šè¿‡ç‚¹å‡»è¡¨æ ¼çš„åŠ å·æ˜¾ç¤ºè¾“å…¥æ¡†ï¼Œéšè—æŒ‰é’®ï¼Œè¾“å…¥æ•°æ®åå›è½¦æˆ–å¤±ç„¦æ—¶æŠŠæ•°æ®ä¿å­˜åˆ°å¯¹è±¡å†…ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾“å…¥æ¡†å¤±ç„¦äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleBlurFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">row</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> spuSaleItemType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">saleAttrValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">baseSaleAttrId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> row</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¦‚æœä¸ºç©ºï¼Œè¿”å›</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">saleAttrValue?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">warning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å±æ€§å€¼ä¸èƒ½ä¸ºç©º&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åˆ¤æ–­å±æ€§å€¼æ˜¯å¦åœ¨æ•°ç»„ä¸­å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> row.spuSaleAttrValueList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item.saleAttrValueName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> saleAttrValue)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ElMessage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">warning</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å·²å­˜åœ¨ç›¸åŒçš„å±æ€§å€¼ï¼Œè¯·æ›´æ¢&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newSaleAttrValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> spuSaleAttrValueListType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    baseSaleAttrId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    saleAttrValueName: saleAttrValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¾€æ•°ç»„å†…æ–°å¢æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  row.spuSaleAttrValueList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newSaleAttrValue)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  row.flag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  row.saleAttrValue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä¸Šæ–¹ä»£ç ä¸­ï¼Œåˆ¤æ–­å½“å‰è¾“å…¥å†…å®¹æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™è¿”å›é”™è¯¯æç¤ºå¹¶é˜»æ­¢è¾“å…¥æ¡†å¤±ç„¦ã€‚åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„å†…å®¹æ˜¯å¦åœ¨å½“å‰å¯¹è±¡æ•°ç»„å†…æœ‰é‡å¤æ•°æ®ï¼Œæœ‰ä¹Ÿå¼¹å‡ºæç¤ºã€‚</p><p>æœ€ç»ˆæ•ˆæœå®ç°ã€‚</p><h2 id="ç¼–è¾‘æ•°æ®" tabindex="-1">ç¼–è¾‘æ•°æ® <a class="header-anchor" href="#ç¼–è¾‘æ•°æ®" aria-label="Permalink to &quot;ç¼–è¾‘æ•°æ®&quot;">â€‹</a></h2><p>åœ¨ç¼–è¾‘æ•°æ®æ—¶é€šè¿‡ä¸ºç¼–è¾‘æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œä¼ é€’å½“å‰é¡¹çš„å¯¹è±¡æ•°æ®æ¥è·å–è¢«é€‰ä¸­çš„æ•°æ®é¡¹ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handleEditFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">row</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  show.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  initAttrData.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> row</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>æ­¤æ—¶èƒ½å¤Ÿè·å–åˆ°æ•°æ®ï¼Œé¡µé¢ä¹Ÿèƒ½å›æ˜¾ï¼Œä¿®æ”¹ç‚¹å‡»ä¿å­˜æŒ‰é’®åä¹Ÿèƒ½æˆåŠŸä¿å­˜ã€‚</p><p>ä½†æ˜¯æœ‰ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ï¼Œå½“æˆ‘ä»¬å†ä¸€æ¬¡ç‚¹å‡»ç¼–è¾‘ï¼Œä¿®æ”¹æ•°æ®åï¼Œä¸éœ€è¦ä¿å­˜è¿™ä¸€æ¬¡çš„ä¿®æ”¹äº†ï¼Œç‚¹å‡»å–æ¶ˆæŒ‰é’®ï¼Œå‘ç°æ•°æ®åŒæ ·ä¹Ÿè¢«æ”¹äº†ï¼Œä½†æ˜¯ä¸æ˜¯è°ƒæ¥å£ï¼Œå› æ­¤åˆ·æ–°åæ•°æ®æ¢å¤æ­£å¸¸ã€‚</p><p>è¿™ä¸ª BUG çš„åŸå› æ˜¯åœ¨èµ‹å€¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯æŠŠå¤æ‚æ•°æ®ç±»å‹çš„å¯¹è±¡ç±»å‹çš„åœ°å€ä¼ è¿‡å»ã€‚å› æ­¤ï¼Œæ•°ç»„å†…è¯¥é¡¹çš„æ•°æ®ä¸ç‚¹å‡»ç¼–è¾‘æ—¶èµ‹å€¼çš„å¯¹è±¡çš„æ•°æ®çš„åœ°å€æ˜¯ä¸€è‡´çš„ï¼Œä¹Ÿå°±é€ æˆäº†æ”¹äº†æ•°æ®åè§†å›¾å‘ç”Ÿå˜åŒ–ã€‚</p><p>è§£å†³æ–¹æ³•ï¼šé€šè¿‡æ·±æ‹·è´æ¥è§£å†³é—®é¢˜ã€‚</p><h2 id="æ‹“å±•-æ·±æ‹·è´çš„nç§æ–¹æ³•" tabindex="-1">æ‹“å±•ï¼šæ·±æ‹·è´çš„Nç§æ–¹æ³• <a class="header-anchor" href="#æ‹“å±•-æ·±æ‹·è´çš„nç§æ–¹æ³•" aria-label="Permalink to &quot;æ‹“å±•ï¼šæ·±æ‹·è´çš„Nç§æ–¹æ³•&quot;">â€‹</a></h2><h3 id="object-assign" tabindex="-1">Object.assign <a class="header-anchor" href="#object-assign" aria-label="Permalink to &quot;Object.assign&quot;">â€‹</a></h3><p><code>Object.assign</code>é»˜è®¤æ˜¯å¯¹å¯¹è±¡è¿›è¡Œæ·±æ‹·è´çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒåªå¯¹æœ€å¤–å±‚çš„è¿›è¡Œæ·±æ‹·è´ï¼Œä¹Ÿå°±æ˜¯å½“å¯¹è±¡å†…åµŒå¥—æœ‰å¯¹è±¡çš„æ—¶å€™ï¼Œè¢«åµŒå¥—çš„å¯¹è±¡è¿›è¡Œçš„è¿˜æ˜¯æµ…æ‹·è´ï¼›</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cloneDeepAssign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({},obj)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //Object.assign({},obj)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ï¼ˆæ¸©é¦¨æç¤ºï¼šæ•°ç»„æ‹·è´æ–¹æ³•å½“ä¸­ï¼Œä½¿ç”¨<code>...</code>ã€<code>slice</code>ã€<code>concat</code>ç­‰è¿›è¡Œæ‹·è´ä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œåªæ·±æ‹·è´æœ€å¤–å±‚ï¼‰</p><p>åŒæ—¶ï¼Œæˆ‘ä»¬çŸ¥é“<code>Object.assign</code>é’ˆå¯¹çš„æ˜¯å¯¹è±¡è‡ªèº«å¯æšä¸¾çš„å±æ€§ï¼Œå¯¹äºä¸å¯æšä¸¾çš„æ²¡æœ‰æ•ˆæœï¼›</p><p>æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬å¯¹äºä¸€ä¸ªå±‚æ¬¡å•ä¸€å¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘è¿™ç§æ–¹æ³•ï¼Œç®€å•å¿«æ·ã€‚ï¼ˆè¯•è¿‡äº†ï¼Œä¹Ÿä¸æ”¯æŒ<code>undefined</code>ï¼‰</p><h3 id="jsonå®ç°çš„æ·±æ‹·è´" tabindex="-1">JSONå®ç°çš„æ·±æ‹·è´ <a class="header-anchor" href="#jsonå®ç°çš„æ·±æ‹·è´" aria-label="Permalink to &quot;JSONå®ç°çš„æ·±æ‹·è´&quot;">â€‹</a></h3><p>è¿™æ˜¯æˆ‘ä»¬æœ€æœ€æœ€å¸¸æåˆ°çš„ä¸€ç§æ·±æ‹·è´çš„æ–¹å¼ï¼Œä¸€èˆ¬å¤§éƒ¨åˆ†çš„æ·±æ‹·è´éƒ½å¯ä»¥ç”¨<code>JSON</code>çš„æ–¹å¼è¿›è¡Œè§£å†³ï¼Œæœ¬è´¨æ˜¯å› ä¸º<code>JSON</code>ä¼šè‡ªå·±å»æ„å»ºæ–°çš„å†…å­˜æ¥å­˜æ”¾æ–°å¯¹è±¡ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cloneDeepJson</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ä½†æ˜¯æˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯ï¼š</p><ul><li>ä¼šå¿½ç•¥ <code>undefined</code>å’Œ<code>symbol</code>ï¼›</li><li>ä¸å¯ä»¥å¯¹<code>Function</code>è¿›è¡Œæ‹·è´ï¼Œå› ä¸º<code>JSON</code>æ ¼å¼å­—ç¬¦ä¸²ä¸æ”¯æŒ<code>Function</code>ï¼Œåœ¨åºåˆ—åŒ–çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ é™¤ï¼›</li><li>è¯¸å¦‚ <code>Map</code>, <code>Set</code>, <code>RegExp</code>, <code>Date</code>, <code>ArrayBuffer </code>å’Œå…¶ä»–å†…ç½®ç±»å‹åœ¨è¿›è¡Œåºåˆ—åŒ–æ—¶ä¼šä¸¢å¤±ï¼›</li><li>ä¸æ”¯æŒå¾ªç¯å¼•ç”¨å¯¹è±¡çš„æ‹·è´;ï¼ˆå¾ªç¯å¼•ç”¨çš„å¯ä»¥å¤§æ¦‚åœ°ç†è§£ä¸ºä¸€ä¸ªå¯¹è±¡é‡Œé¢çš„æŸä¸€ä¸ªå±æ€§çš„å€¼æ˜¯å®ƒè‡ªå·±ï¼‰</li></ul><h3 id="messagechannel" tabindex="-1">MessageChannel <a class="header-anchor" href="#messagechannel" aria-label="Permalink to &quot;MessageChannel&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deepCopy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> ev</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ev.data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deepCopy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">copy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼‚æ­¥çš„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> copyObj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> copy;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(copyObj, obj)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(copyObj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>ï¼ˆä¸ªäººæ„Ÿè§‰è¿™ç§æ–¹æ³•è¿˜æŒºæœ‰æ„æ€çš„ï¼Œå¦‚æœé¢è¯•çš„è®²å‡ºæ¥çš„è¯ï¼Œåº”è¯¥ä¼šç»™é¢è¯•å®˜ä¸€ä¸ªå°æƒŠå–œğŸ™Œï¼‰</p><p>ç¼ºç‚¹ï¼šæœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯å¼‚æ­¥çš„ï¼ŒåŒæ—¶ä¹Ÿæ— æ³•æ”¯æŒ<code>Function</code></p><p>å¦å¤–ï¼Œå¦‚æœå¯¹<code>MessageChannel</code>æ„Ÿå…´è¶£çš„å‹å‹ï¼Œä¸ºæ‚¨æ¨èä¸€ç¯‡ç®€å•æ˜“æ‡‚çš„å°æ–‡ç« -&gt;<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.jianshu.com%2Fp%2F4f07ef18b5d7" target="_blank" rel="noreferrer">MessageChannelæ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆä½¿ç”¨ï¼Ÿ - ç®€ä¹¦ (jianshu.com)</a></p><h3 id="é€’å½’å®ç°" tabindex="-1">é€’å½’å®ç° <a class="header-anchor" href="#é€’å½’å®ç°" aria-label="Permalink to &quot;é€’å½’å®ç°&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cloneDeepDi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> newObj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keys </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keys.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keys[i];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj[key];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      newObj[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cloneDeepDi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      newObj[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newObj</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æœ€æœ€æœ€æœ€å¸¸ç”¨çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œé¢è¯•å¿…å¤‡ï¼Œæ‰€ä»¥æ‰ªå¿ƒè‡ªé—®ï¼Œä½ æŠŠå®ƒå†™çš„æ»šç“œçƒ‚ç†Ÿäº†å˜›ï¼Ÿ</p><p>è™½ç„¶ä½†æ˜¯ï¼Œå®ƒä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œå°±æ˜¯ä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œä¸€æ—¦å‡ºç°äº†å¾ªç¯å¼•ç”¨ï¼Œå°±æ­»å¾ªç¯äº†ï¼</p><h3 id="è§£å†³å¾ªç¯å¼•ç”¨çš„é€’å½’å®ç°" tabindex="-1">è§£å†³å¾ªç¯å¼•ç”¨çš„é€’å½’å®ç° <a class="header-anchor" href="#è§£å†³å¾ªç¯å¼•ç”¨çš„é€’å½’å®ç°" aria-label="Permalink to &quot;è§£å†³å¾ªç¯å¼•ç”¨çš„é€’å½’å®ç°&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">jså¤åˆ¶ä»£ç </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deepCopy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">parent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keys </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        temp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        _parent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parent;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è¯¥å­—æ®µæœ‰çˆ¶çº§åˆ™éœ€è¦è¿½æº¯è¯¥å­—æ®µçš„çˆ¶çº§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (_parent) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å¦‚æœè¯¥å­—æ®µå¼•ç”¨äº†å®ƒçš„çˆ¶çº§åˆ™ä¸ºå¾ªç¯å¼•ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (_parent.originalParent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å¾ªç¯å¼•ç”¨ç›´æ¥è¿”å›åŒçº§çš„æ–°å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _parent.currentParent;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        _parent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _parent.parent;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keys.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keys[i];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        temp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj[key];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // å¦‚æœå­—æ®µçš„å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (temp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> temp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // é€’å½’æ‰§è¡Œæ·±æ‹·è´ å°†åŒçº§çš„å¾…æ‹·è´å¯¹è±¡ä¸æ–°å¯¹è±¡ä¼ é€’ç»™ parent æ–¹ä¾¿è¿½æº¯å¾ªç¯å¼•ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            result[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DeepCopy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(temp, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                originalParent: obj,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                currentParent: result,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                parent: parent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            result[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> temp;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>å¤§è‡´çš„æ€è·¯æ˜¯ï¼šåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡çš„å­—æ®µæ˜¯å¦å¼•ç”¨äº†è¿™ä¸ªå¯¹è±¡æˆ–è¿™ä¸ªå¯¹è±¡çš„ä»»æ„çˆ¶çº§ï¼Œå¦‚æœå¼•ç”¨äº†çˆ¶çº§ï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿”å›åŒçº§çš„æ–°å¯¹è±¡ï¼Œåä¹‹ï¼Œè¿›è¡Œé€’å½’çš„é‚£å¥—æµç¨‹ã€‚</p><p>ä½†å…¶å®ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æ²¡æœ‰è§£å†³çš„ï¼Œå°±æ˜¯å­å¯¹è±¡é—´çš„äº’ç›¸å¼•ç”¨ï¼Œä¸ç†è§£ä»€ä¹ˆæ„æ€çš„å‹å‹ï¼Œå¯ä»¥çœ‹-&gt;<a href="https://link.juejin.cn/?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F23251162" target="_blank" rel="noreferrer">Javascriptä¹‹æ·±æ‹·è´ - çŸ¥ä¹ (zhihu.com)</a>çš„ååŠéƒ¨åˆ†çš„å†…å®¹ï¼Œå¯¹åº”ä¹Ÿå†™ç»™å‡ºæ¥è§£å†³æ–¹æ¡ˆï¼›ï¼ˆé„™äººæ‡’ï¼Œå°±ä¸èµ˜è¿°äº†ğŸ¤¶ï¼‰</p><h3 id="lodashçš„-clonedeep" tabindex="-1"><a href="https://link.juejin.cn/?target=https%3A%2F%2Flodash.com%2F" target="_blank" rel="noreferrer">lodash</a>çš„_.cloneDeep() <a class="header-anchor" href="#lodashçš„-clonedeep" aria-label="Permalink to &quot;[lodash](https://link.juejin.cn/?target=https%3A%2F%2Flodash.com%2F)çš„_.cloneDeep()&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lodash&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    b: { f: { g: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    c: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cloneDeep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj1);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj1.b.f </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj2.b.f);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span></code></pre></div><p>è¿™æ˜¯æœ€æœ€æœ€æœ€å®Œç¾çš„æ·±æ‹·è´çš„æ–¹å¼ï¼Œå®ƒå·²ç»å°†ä¼šå‡ºç°é—®é¢˜çš„å„ç§æƒ…å†µéƒ½è€ƒè™‘åœ¨å†…äº†ï¼Œæ‰€ä»¥åœ¨æ—¥å¸¸é¡¹ç›®å¼€å‘å½“ä¸­ï¼Œå»ºè®®ä½¿ç”¨è¿™ç§æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆï¼›å…³äºåŸç†åˆ†æï¼Œé„™äººæ— èƒ½ï¼Œåªèƒ½ä¸ºå„ä½å¤§ä½¬æŒ‡ä¸ªè·¯:</p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Flodash.com%2F" target="_blank" rel="noreferrer">Lodash</a></p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.lodashjs.com%2Fdocs%2Flodash.cloneDeep%2F" target="_blank" rel="noreferrer">lodash.cloneDeep | Lodash ä¸­æ–‡æ–‡æ¡£ | Lodash ä¸­æ–‡ç½‘ (lodashjs.com)</a></p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fmoyui%2FBlogPosts%2Fblob%2Fmaster%2F2018%2Flodash%E6%B7%B1%E6%8B%B7%E8%B4%9D%E6%BA%90%E7%A0%81%E6%8E%A2%E7%A9%B6.md" target="_blank" rel="noreferrer">BlogPosts/lodashæ·±æ‹·è´æºç æ¢ç©¶.md at master Â· moyui/BlogPosts Â· GitHub</a></p><p>æ³¨ï¼šå…¶å®lodashè§£å†³å¾ªç¯å¼•ç”¨çš„æ–¹å¼ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªæ ˆè®°å½•æ‰€æœ‰è¢«æ‹·è´çš„å¼•ç”¨å€¼ï¼Œå¦‚æœå†æ¬¡ç¢°åˆ°åŒæ ·çš„å¼•ç”¨å€¼çš„æ—¶å€™ï¼Œä¸ä¼šå†å»æ‹·è´ä¸€éï¼Œè€Œæ˜¯åˆ©ç”¨ä¹‹å‰å·²ç»æ‹·è´å¥½çš„ã€‚</p><h3 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h3><p>å…¶å®äº†è§£äº†ä»¥ä¸Šçš„æ–¹å¼å°±å·²ç»éå¸¸å¤Ÿç”¨äº†ï¼›é‡ç‚¹è®°ä½ï¼Œåœ¨æ—¥å¸¸ç”Ÿäº§ç¯å¢ƒå½“ä¸­ï¼Œä½¿ç”¨å®Œç¾æ–¹æ¡ˆâ€”<code>lodash.cloneDeep</code>ï¼Œé¢è¯•é—®èµ·æ¥çš„è¯ï¼Œé‡ç‚¹ä½¿ç”¨é€’å½’å®ç°ï¼ŒJSONã€Object.assginã€MessageChanneléƒ½å¯ä»¥ä½œä¸ºè¡¥å……ï¼Œè¿™åŸºæœ¬ä¸Šå°±å·²ç»å›ç­”çš„éå¸¸å¥½äº†ã€‚</p><p>æœ¬æ–‡é‡ç‚¹çš„å†…å®¹å…¶å®åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œåé¢æ˜¯è¡¥å……ä¸€äº›ä¸å¤ªå¸¸ç”¨çš„æ–¹æ³•ï¼Œæ„Ÿå…´è¶£çš„å‹å‹å¯ä»¥ç»§ç»­äº†è§£</p><h4 id="è¡¥å……ä¸€äº›ä¸å¤ªä¸»æµçš„æ–¹æ³•" tabindex="-1">è¡¥å……ä¸€äº›ä¸å¤ªä¸»æµçš„æ–¹æ³• <a class="header-anchor" href="#è¡¥å……ä¸€äº›ä¸å¤ªä¸»æµçš„æ–¹æ³•" aria-label="Permalink to &quot;è¡¥å……ä¸€äº›ä¸å¤ªä¸»æµçš„æ–¹æ³•&quot;">â€‹</a></h4><h5 id="å¯¹è±¡å„ç§æ–¹æ³•çš„åº”ç”¨" tabindex="-1">å¯¹è±¡å„ç§æ–¹æ³•çš„åº”ç”¨ <a class="header-anchor" href="#å¯¹è±¡å„ç§æ–¹æ³•çš„åº”ç”¨" aria-label="Permalink to &quot;å¯¹è±¡å„ç§æ–¹æ³•çš„åº”ç”¨&quot;">â€‹</a></h5><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deepClone</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> copy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPrototypeOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> propNames </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOwnPropertyNames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    propNames.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">items</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOwnPropertyDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, items);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(copy, items, item);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> copy;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h5 id="for-in-ä¸object-createç»“åˆå®ç°" tabindex="-1">for..in.ä¸Object.createç»“åˆå®ç° <a class="header-anchor" href="#for-in-ä¸object-createç»“åˆå®ç°" aria-label="Permalink to &quot;for..in.ä¸Object.createç»“åˆå®ç°&quot;">â€‹</a></h5><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deepClone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">initalObj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">finalObj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {   </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> finalObj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};   </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> initalObj) {       </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> initalObj[i];        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é¿å…ç›¸äº’å¼•ç”¨å¯¹è±¡å¯¼è‡´æ­»å¾ªç¯ï¼Œå¦‚initalObj.a = initalObjçš„æƒ…å†µ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj)  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">continue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;      </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            obj[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (prop.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">constructor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Array) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prop);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          obj[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prop;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }   </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h5 id="history-api" tabindex="-1">History API <a class="header-anchor" href="#history-api" aria-label="Permalink to &quot;History API&quot;">â€‹</a></h5><p>åˆ©ç”¨history.replaceStateã€‚è¿™ä¸ªapiåœ¨åšå•é¡µé¢åº”ç”¨çš„è·¯ç”±æ—¶å¯ä»¥åšæ— åˆ·æ–°çš„æ”¹å˜urlã€‚è¿™ä¸ªå¯¹è±¡ä½¿ç”¨ç»“æ„åŒ–å…‹éš†ï¼Œè€Œä¸”æ˜¯åŒæ­¥çš„ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œåœ¨å•é¡µé¢ä¸­ä¸è¦æŠŠåŸæœ‰çš„è·¯ç”±é€»è¾‘æä¹±äº†ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨å…‹éš†å®Œä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œè¦æ¢å¤è·¯ç”±çš„åŸçŠ¶ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> structuralClone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> oldState</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> history.state;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> copy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   history.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replaceState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj, document.title);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   copy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> history.state;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   history.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replaceState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(oldState, document.title); </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> copy;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {obj};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> copy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> structuralClone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(copy);</span></span></code></pre></div><p>è¿™ä¸ªæ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ã€‚èƒ½è§£å†³å¾ªç¯å¯¹è±¡çš„é—®é¢˜ï¼Œä¹Ÿæ”¯æŒè®¸å¤šå†…ç½®ç±»å‹çš„å…‹éš†ã€‚å¹¶ä¸”æ˜¯åŒæ­¥çš„ã€‚ä½†æ˜¯ç¼ºç‚¹å°±æ˜¯æœ‰çš„æµè§ˆå™¨å¯¹è°ƒç”¨é¢‘ç‡æœ‰é™åˆ¶ã€‚æ¯”å¦‚Safari 30 ç§’å†…åªå…è®¸è°ƒç”¨ 100 æ¬¡</p><h5 id="notification-api" tabindex="-1">Notification API <a class="header-anchor" href="#notification-api" aria-label="Permalink to &quot;Notification API&quot;">â€‹</a></h5><p>è¿™ä¸ªapiä¸»è¦æ˜¯ç”¨äºæ¡Œé¢é€šçŸ¥çš„ã€‚å¦‚æœä½ ä½¿ç”¨Facebookçš„æ—¶å€™ï¼Œä½ è‚¯å®šä¼šå‘ç°æ—¶å¸¸åœ¨æµè§ˆå™¨çš„å³ä¸‹è§’æœ‰ä¸€ä¸ªå¼¹çª—ï¼Œå¯¹å°±æ˜¯è¿™å®¶ä¼™ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨è¿™ä¸ªapiå®ç°jså¯¹è±¡çš„æ·±æ‹·è´ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> structuralClone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">obj</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Notification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {data: obj, silent: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}).data;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {obj};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">obj.b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> copy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> structuralClone</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(copy)</span></span></code></pre></div><p>åŒæ ·æ˜¯ä¼˜ç‚¹å’Œç¼ºç‚¹å¹¶å­˜ï¼Œä¼˜ç‚¹å°±æ˜¯å¯ä»¥è§£å†³å¾ªç¯å¯¹è±¡é—®é¢˜ï¼Œä¹Ÿæ”¯æŒè®¸å¤šå†…ç½®ç±»å‹çš„å…‹éš†ï¼Œå¹¶ä¸”æ˜¯åŒæ­¥çš„ã€‚ç¼ºç‚¹å°±æ˜¯è¿™ä¸ªéœ€è¦apiçš„ä½¿ç”¨éœ€è¦å‘ç”¨æˆ·è¯·æ±‚æƒé™ï¼Œä½†æ˜¯ç”¨åœ¨è¿™é‡Œå…‹éš†æ•°æ®çš„æ—¶å€™ï¼Œä¸ç»ç”¨æˆ·æˆæƒä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚åœ¨httpåè®®çš„æƒ…å†µä¸‹ä¼šæç¤ºä½ å†httpsçš„åœºæ™¯ä¸‹ä½¿ç”¨ã€‚</p><h4 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h4><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcoffe1891.gitbook.io%2Ffrontend-hard-mode-interview%2F1%2F1.3.1" target="_blank" rel="noreferrer">å£¹.3.1 æ·±æ‹·è´ä¸æµ…æ‹·è´ - å‰ç«¯å†…å‚ (gitbook.io)</a></p><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.php.cn%2Ffaq%2F465102.html%23%3A~%3Atext%3D%E6%B7%B1%E6%8B%B7%E8%B4%9D%E7%9A%84%E4%B8%89%E7%A7%8D%E5%AE%9E%E7%8E%B0%2Cxtend%E6%96%B9%E6%B3%95%E3%80%82" target="_blank" rel="noreferrer">æ·±æ‹·è´çš„ä¸‰ç§å®ç°æ–¹å¼æ˜¯ä»€ä¹ˆ-å¸¸è§é—®é¢˜-PHPä¸­æ–‡ç½‘</a></p>`,77)]))}const y=i(l,[["render",k]]);export{g as __pageData,y as default};
